<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fast8Bondhu Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<style>
body { font-family: Arial; background:#f5f5f5; margin:0; }
header { background:#e63946; color:#fff; padding:15px; text-align:center; }
section { padding:15px; }
.card { background:#fff; padding:15px; border-radius:8px; margin-bottom:15px; }
input, button, select {
  width:100%; padding:10px; margin:6px 0;
}
button { background:#e63946; color:#fff; border:none; cursor:pointer; }
.hidden { display:none; }
table { width:100%; border-collapse:collapse; }
td, th { border:1px solid #ddd; padding:8px; font-size:13px; }
</style>
</head>

<body>

<header>
  <h2>Fast8Bondhu â€“ Admin Panel</h2>
</header>

<!-- LOGIN -->
<section id="loginSection" class="card">
  <h3>Admin Login</h3>
  <input id="email" placeholder="Admin Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</section>

<!-- DASHBOARD -->
<section id="dashboard" class="hidden">

  <!-- ADD PRODUCT -->
  <div class="card">
    <h3>Add Product</h3>
    <input id="pName" placeholder="Product Name">
    <input id="pPrice" type="number" placeholder="Price">
    <input id="pStock" type="number" placeholder="Stock">
    <button onclick="addProduct()">Add Product</button>
  </div>

  <!-- PRODUCT LIST -->
  <div class="card">
    <h3>Products</h3>
    <div id="productList"></div>
  </div>

  <!-- ORDERS -->
  <div class="card">
    <h3>Orders</h3>
    <div id="orderList"></div>
  </div>

</section>

<script>
/* ðŸ”¥ Firebase Config (YOURS) */
firebase.initializeApp({
  apiKey: "AIzaSyC2zOBXJZenhCezfVNa4WdAYNFgG_ivb98",
  authDomain: "fast8bondhu-6f6a6.firebaseapp.com",
  projectId: "fast8bondhu-6f6a6",
  storageBucket: "fast8bondhu-6f6a6.firebasestorage.app",
  messagingSenderId: "796987979513",
  appId: "1:796987979513:web:0befb96daba208f1bd5428"
});

const auth = firebase.auth();
const db = firebase.firestore();

/* LOGIN */
function login(){
  auth.signInWithEmailAndPassword(
    email.value, password.value
  ).catch(e=>alert(e.message));
}

auth.onAuthStateChanged(user=>{
  if(user){
    loginSection.classList.add("hidden");
    dashboard.classList.remove("hidden");
    loadProducts();
    loadOrders();
  }
});

/* PRODUCTS */
function addProduct(){
  db.collection("products").add({
    name:pName.value,
    price:Number(pPrice.value),
    stock:Number(pStock.value),
    createdAt:firebase.firestore.FieldValue.serverTimestamp()
  });
  pName.value=pPrice.value=pStock.value="";
}

function loadProducts(){
  db.collection("products").onSnapshot(snap=>{
    productList.innerHTML="";
    snap.forEach(d=>{
      let p=d.data();
      productList.innerHTML+=`
        <p>
          ${p.name} | â‚¹${p.price} | Stock:${p.stock}
          <button onclick="deleteProduct('${d.id}')">Delete</button>
        </p>`;
    });
  });
}

function deleteProduct(id){
  db.collection("products").doc(id).delete();
}

/* ORDERS */
function loadOrders(){
  db.collection("orders")
    .orderBy("timestamp","desc")
    .onSnapshot(snap=>{
      orderList.innerHTML="";
      snap.forEach(d=>{
        let o=d.data();
        orderList.innerHTML+=`
          <div style="border-bottom:1px solid #ddd; padding:8px">
            <b>${o.customerName}</b> | â‚¹${o.totalAmount}<br>
            Status:
            <select onchange="updateStatus('${d.id}',this.value)">
              <option ${o.status=="Pending"?"selected":""}>Pending</option>
              <option ${o.status=="Assigned"?"selected":""}>Assigned</option>
              <option ${o.status=="Delivered"?"selected":""}>Delivered</option>
            </select>
          </div>`;
      });
    });
}

function updateStatus(id,status){
  db.collection("orders").doc(id).update({status});
}
</script>

</body>
</html>