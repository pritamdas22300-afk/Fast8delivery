<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fast8 Bondhu - One Stop Shop</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #e63946; --secondary: #1d3557; --accent: #ffb703; --light: #f1faee; }
        body { font-family: 'Poppins', sans-serif; background: #f8f9fa; margin: 0; color: #333; }
        
        /* Header & Banners */
        header { background: var(--primary); color: white; padding: 20px; border-radius: 0 0 25px 25px; text-align: center; box-shadow: 0 4px 15px rgba(230, 57, 70, 0.3); }
        .promo-banner { background: var(--accent); margin: 15px; padding: 15px; border-radius: 15px; font-weight: bold; font-size: 14px; color: #000; display: flex; align-items: center; gap: 10px; }

        /* Category Tabs */
        .tabs { display: flex; justify-content: space-around; padding: 10px; position: sticky; top: 0; background: #f8f9fa; z-index: 100; }
        .tab-item { padding: 10px 20px; border-radius: 25px; background: white; font-weight: bold; border: 1px solid #ddd; cursor: pointer; transition: 0.3s; }
        .tab-item.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* Product Cards */
        .container { padding: 15px; }
        .product-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .product-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; padding-bottom: 10px; }
        .p-info { padding: 10px; }
        .p-name { font-weight: bold; font-size: 16px; margin-bottom: 5px; }
        .p-price { color: var(--primary); font-weight: 700; }
        .add-btn { background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 8px; width: 90%; margin: 5px auto; display: block; cursor: pointer; }

        /* Parcel Section */
        .parcel-box { background: white; padding: 20px; border-radius: 15px; display: none; }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; }

        /* Floating Cart */
        .cart-bar { position: fixed; bottom: 20px; left: 15px; right: 15px; background: var(--secondary); color: white; padding: 15px 20px; border-radius: 15px; display: none; justify-content: space-between; align-items: center; z-index: 1000; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }

        /* WhatsApp Button */
        .wa-float { position: fixed; bottom: 100px; right: 20px; background: #25d366; color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 25px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 999; text-decoration: none; }
    </style>
</head>
<body>

<header>
    <h2 style="margin:0;">Fast8 Bondhu ðŸš€</h2>
    <p style="font-size: 12px; opacity: 0.9;">Grocery â€¢ Tiffin â€¢ Parcel Delivery</p>
</header>

<div class="promo-banner">
    <i class="fas fa-motorcycle"></i>
    <span>Free Delivery on orders above â‚¹500!</span>
</div>

<div class="tabs">
    <div class="tab-item active" onclick="switchSection('grocery', this)">Grocery</div>
    <div class="tab-item" onclick="switchSection('tiffin', this)">Tiffin</div>
    <div class="tab-item" onclick="switchSection('parcel', this)">Parcel</div>
    <div class="tab-item" onclick="switchSection('track', this)">Track</div>
</div>

<div class="container">
    <div id="shop-section" class="product-grid">
        </div>

    <div id="parcel-section" class="parcel-box">
        <h3>Pick & Drop Service</h3>
        <textarea id="parcelDesc" placeholder="What are we delivering? (e.g. Home keys, Documents)"></textarea>
        <input type="text" id="pickup" placeholder="Pickup Address">
        <input type="text" id="drop" placeholder="Drop-off Address">
        <button class="add-btn" style="width:100%;" onclick="openCheckout('parcel')">Proceed to Checkout</button>
    </div>

    <div id="track-section" style="display:none;">
        <div class="product-card" style="padding:20px;">
            <h3>Track Your Order</h3>
            <input type="tel" id="trackPhone" placeholder="Enter Mobile Number">
            <button class="add-btn" onclick="fetchMyOrders()">Check Status</button>
            <div id="order-status-list" style="margin-top:20px;"></div>
        </div>
    </div>
</div>

<a href="https://wa.me/91XXXXXXXXXX" class="wa-float" target="_blank">
    <i class="fab fa-whatsapp"></i>
</a>

<div class="cart-bar" id="cart-bar">
    <div id="cart-details">0 Items | â‚¹0</div>
    <button onclick="openCheckout()" style="background:var(--accent); border:none; padding:10px 20px; border-radius:10px; font-weight:bold; cursor:pointer;">View Cart</button>
</div>

<script>
    // Firebase Config remains same
    const firebaseConfig = {
        apiKey: "AIzaSyBpRhuVaHqznb9q8YEJP3Pg19MWv5camXE",
        authDomain: "fast8delivery-a90b4.firebaseapp.com",
        projectId: "fast8delivery-a90b4",
        appId: "1:200027434311:web:9bc6caf3db527b602c3062"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let currentCat = 'Grocery', cart = {}, products = [];

    function switchSection(sec, el) {
        document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
        el.classList.add('active');
        
        document.getElementById('shop-section').style.display = (sec==='grocery'||sec==='tiffin') ? 'grid' : 'none';
        document.getElementById('parcel-section').style.display = (sec==='parcel') ? 'block' : 'none';
        document.getElementById('track-section').style.display = (sec==='track') ? 'block' : 'none';
        
        if(sec==='grocery' || sec==='tiffin') {
            currentCat = (sec==='grocery') ? 'Grocery' : 'Tiffin';
            loadData();
        }
    }

    function loadData() {
        db.collection("products").where("category", "==", currentCat).onSnapshot(snap => {
            products = [];
            const grid = document.getElementById('shop-section');
            grid.innerHTML = "";
            snap.forEach(doc => {
                let p = {id: doc.id, ...doc.data()};
                products.push(p);
                grid.innerHTML += `
                    <div class="product-card">
                        <div style="height:100px; background:#eee; display:flex; align-items:center; justify-content:center; color:#ccc;">IMAGE</div>
                        <div class="p-info">
                            <div class="p-name">${p.name}</div>
                            <div class="p-price">â‚¹${p.price} <small>/ ${p.unit}</small></div>
                        </div>
                        <button class="add-btn" onclick="addToCart('${p.id}')">${cart[p.id] ? 'Added ('+cart[p.id]+')' : 'Add to Cart'}</button>
                    </div>`;
            });
        });
    }

    function addToCart(id) {
        cart[id] = (cart[id] || 0) + 1;
        updateCartBar();
        loadData();
    }

    function updateCartBar() {
        let count = 0, total = 0;
        for(let id in cart) {
            let p = products.find(x => x.id === id);
            if(p) { count += cart[id]; total += p.price * cart[id]; }
        }
        document.getElementById('cart-bar').style.display = count > 0 ? 'flex' : 'none';
        document.getElementById('cart-details').innerText = `${count} Items | â‚¹${total}`;
    }

    // Add fetchMyOrders() for Tracking tab...
</script>
</body>
</html>
